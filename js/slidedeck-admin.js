/*!
 * SlideDeck 2 Pro for WordPress Admin JavaScript
 *
 * More information on this project:
 * http://www.slidedeck.com/
 *
 * Full Usage Documentation: http://www.slidedeck.com/usage-documentation
 *
 * @package SlideDeck
 * @subpackage SlideDeck 2 Pro for WordPress
 *
 * @author dtelepathy
 */
/*!
Copyright 2012 digital-telepathy  (email : support@digital-telepathy.com)

This file is part of SlideDeck.

SlideDeck is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

SlideDeck is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with SlideDeck.  If not, see <http://www.gnu.org/licenses/>.
*/
var SlideDeckLensAdmin={};var SlideDeckPlugin={namespace:"slidedeck"};var tooltipperOffset={Y:-4,X:-11};function updateSlideDeckPreview(c){var d=document.getElementById("btn_slidedeck_preview_submit");var h=d.href.split("?")[1].split("&");var g={};for(var b in h){var e=h[b].split("=");g[e[0]]=e[1]}g[c.id]=c.value;switch(c.id){case"preview_w":g.width=Math.max(630,g[c.id].match(/([0-9]+)/g)[0],10)+20;break;case"preview_h":g.height=parseInt(g[c.id].match(/([0-9]+)/g)[0],10)+200;break}var a=d.href.split("?")[0];var i="?";for(var f in g){a+=i+f+"="+g[f];i="&"}d.href=a}function closePreviewWatcher(){var a;a=setInterval(function(){if(document.getElementById("TB_closeWindowButton")){clearInterval(a);jQuery("#TB_closeWindowButton, #TB_overlay").bind("mouseup",function(b){cleanUpSlideDecks()})}},20)}function cleanUpSlideDecks(){jQuery("body > a").filter(function(){return(this.id.indexOf("SlideDeck_Bug")!=-1)}).remove()}var updateTBSize=function(){var a=jQuery("#TB_window"),j=jQuery("#TB_title"),b=jQuery(window).width(),l=jQuery(window).height(),d=(720<b)?720:b,g=0;var n=j.height();if(jQuery("body.admin-bar").length){g=jQuery("#wpadminbar").height()}if(a.size()){if(a.find("#slidedeck_preview_window").length){var m=jQuery("#TB_ajaxContent");var i=a.find(".slidedeck_frame");var h=i.closest("div:not(.slidedeck_frame)");var c={borderLeft:parseInt(i.css("border-left-width"),10),borderRight:parseInt(i.css("border-right-width"),10),paddingLeft:parseInt(i.css("padding-left"),10),paddingRight:parseInt(i.css("padding-right"),10)};for(var f in c){c[f]=isNaN(c[f])?0:c[f]}var e=parseInt(jQuery("#preview_w").val(),10);d=e+c.borderLeft+c.borderRight+c.paddingLeft+c.paddingRight;l=m.outerHeight();a.width(d+40).height(l+n);m.width(d+10);h.width(d)}else{a.width(d-50).height(l-45-g)}jQuery("#TB_iframeContent").width(d-50).height(l-75-g);a.css({"margin-left":"-"+parseInt((a.width()/2),10)+"px"});if(typeof document.body.style.maxWidth!="undefined"){a.css({top:(20+g)+"px","margin-top":"0"})}}return jQuery("a.slide-background-upload").each(function(){var k=this.href;if(!k){return}k=k.replace(/&width=[0-9]+/g,"");k=k.replace(/&height=[0-9]+/g,"");this.href=k+"&width="+(d-80)+"&height="+(l-85-g)})};var tb_position=updateTBSize;(function(a){SlideDeckPlugin.DOMUtilities={images:[],autoReplaceInputs:function(b){this.setContext(b).context.find("input.autoReplace, textarea.autoReplace, input.auto-replace, textarea.auto-replace").addClass("empty").focus(function(c){if(this.value==this.defaultValue){this.value=""}a(this).addClass("focus").removeClass("empty")}).blur(function(c){if(a.trim(this.value)===""){this.value=this.defaultValue;a(this).addClass("empty")}a(this).removeClass("focus")});return this},setContext:function(b){if(typeof(b)!="undefined"){this.context=a(b)}return this},initialize:function(b){if(typeof(b)=="undefined"){b=a(document.body)}this.setContext(b).autoReplaceInputs()}};SlideDeckPlugin.FirstSaveDialog={cookiename:"dont-show-first-save",elems:{},onComplete:function(){var b=this,e=a("#slidedeck-publish-method-copy-paste .action");var d=e.find(".slidedeck-copy-to-clipboard");var c=e.find(".complete-message");a("#first-save-do-not-show-again").find("input").bind("click",function(f){if(this.checked){a.cookie(b.cookiename,1,{expires:365});b.modal.close()}});a("#first-save-do-not-show-again .close").bind("click",function(f){f.preventDefault();b.modal.close()})},open:function(c){var b=this;if(a.cookie(this.cookiename)){return false}if(!this.modal){this.modal=new SimpleModal({context:"firstsave",onComplete:function(d){b.onComplete()}})}a.get(ajaxurl+"?action=slidedeck_first_save_dialog&slidedeck="+c,function(d){b.modal.open(d)})}};SlideDeckPlugin.GplusPostsModal={elems:{},close:function(){self.modal.close()},open:function(){var b=this;if(!this.modal){this.modal=new SimpleModal({context:"gplus-how-to",onComplete:function(){var c=a("#gplus-posts-how-to").slidedeck({keys:false,scroll:false,hideSpines:true});var e=a("#gplus-posts-how-to-steps"),h=a("#gplus-how-to-why"),g=a("#gplus-how-to-why-link"),f=a("#gplus-how-to-next"),i=a("#gplus-how-to-step").find(".current");var d=e.find("a");e.delegate("a","click",function(k){k.preventDefault();var l=a.data(this,"$this");if(!l){l=a(this);a.data(this,"$this")}d.removeClass("current");l.addClass("current");var j=parseInt(this.href.split("#")[1],10);c.goTo(j);i.text(j);if(c.current==c.slides.length){f.text("Done")}else{f.text("Next")}});g.bind("click",function(j){j.preventDefault();if(g.hasClass("open")){g.removeClass("open");h.removeClass("open")}else{g.addClass("open");h.addClass("open")}});f.bind("click",function(j){j.preventDefault();if(c.current==c.slides.length){b.modal.close()}c.next();i.text(c.current);d.removeClass("current");d.eq(c.current-1).addClass("current");if(c.current==c.slides.length){f.text("Finished!")}else{f.text("Next Step")}})}})}a.get(ajaxurl+"?action=slidedeck_gplus_posts_how_to_modal",function(c){b.modal.open(c)})}};SlideDeckPlugin.InsertModal={elems:{},insertSlideDecks:function(){var f=this.elems.form.serializeArray(),l=[],c="";for(var k in f){var b=f[k];if(b.name=="slidedecks[]"){l.push("[SlideDeck2 id="+b.value+(parent.slideDeck2iframeByDefault==true?" iframe=1":"")+"]")}}var g,m=typeof(parent.tinymce)!="undefined",j=typeof(parent.QTags)!="undefined";if(!parent.wpActiveEditor){if(m&&parent.tinymce.activeEditor){g=parent.tinymce.activeEditor;parent.wpActiveEditor=g.id}else{if(!j){return false}}}else{if(m){if(parent.tinymce.activeEditor&&(parent.tinymce.activeEditor.id=="mce_fullscreen"||parent.tinymce.activeEditor.id=="wp_mce_fullscreen")){g=parent.tinymce.activeEditor}else{g=parent.tinymce.get(parent.wpActiveEditor)}}}if(g&&!g.isHidden()){if(parent.tinymce.isIE&&g.windowManager.insertimagebookmark){g.selection.moveToBookmark(g.windowManager.insertimagebookmark)}for(var o in l){c+="<p>"+l[o]+"</p>"}g.execCommand("mceInsertContent",false,c)}else{if(j){var n="";for(var o in l){c+=n+l[o];n="\n\n"}parent.QTags.insertContent(c)}else{parent.getElementById(parent.wpActiveEditor).value+=c}}try{parent.tb_remove()}catch(i){}},updateOrderby:function(){var b=this;a.ajax({url:this.elems.form.attr("action"),data:this.elems.form.serialize(),success:function(c){b.elems.tableContainer.html(c)}})},initialize:function(){var b=this;this.elems.form=a("#slidedeck-insert-iframe-form");if(this.elems.form.length<1){return false}this.elems.tableContainer=a("#slidedeck-insert-iframe-section-table .inner");this.elems.cancelLink=a("#slidedeck-insert-iframe-cancel-link");this.elems.cancelLink.bind("click",function(c){c.preventDefault();parent.tb_remove()});this.elems.form.delegate('select[name="orderby"]',"change",function(c){b.updateOrderby()});this.elems.form.delegate("td","mouseenter mouseleave click",function(e){var f=a.data(this,"$this"),c=a.data(this,"$row"),g=a.data(this,"$input"),d=a.data(this,"$siblings");if(!f){f=a(this);a.data(this,"$this",f)}if(!c){c=f.closest("tr");d=c.children("td");d.each(function(){a.data(this,"$row",c);a.data(this,"$siblings",d)})}if(!g){g=c.find("input.slidedecks-insert");d.each(function(){a.data(this,"$input",g)})}switch(e.type){case"mouseenter":c.addClass("hover");break;case"mouseleave":c.removeClass("hover");break;case"click":if(!c.hasClass("selected")){c.addClass("selected");g[0].checked=true}else{g[0].checked=false;c.removeClass("selected")}break}});this.elems.form.bind("submit",function(c){c.preventDefault();b.insertSlideDecks()})}};SlideDeckPlugin.LensManagement={elems:{},deleteLens:function(d){var c=this;var b=a(d);a.ajax({url:document.location.href,data:b.serialize(),type:"post",dataType:"json",success:function(e){if(e.error===true){if(typeof(e.redirect)!="undefined"){document.location.href=e.redirect;return false}else{alert(e.message);return false}}b.closest(".lens").fadeOut(500,function(){b.closest(".lens").remove();c.elems.lensList.masonry("reload")})}})},initialize:function(){var b=this;this.elems.lensList=a("#slidedeck-lenses");if(this.elems.lensList.length<1){return false}this.elems.lenses=this.elems.lensList.find(".lens");this.elems.lensList.delegate(".actions form","submit",function(c){c.preventDefault();if(confirm("Are you sure you want to delete this lens? THIS CANNOT BE UNDONE.")){b.deleteLens(this)}});a("#slidedeck_lens_management").delegate("a.disabled, .disabled a","click",function(c){c.preventDefault();return false});this.elems.lensList.masonry({itemSelector:".lens",columnWidth:278,gutterWidth:45,animationOptions:{duration:500},isAnimated:true})}};SlideDeckPlugin.LensManager={elems:{},loadedScripts:{},select:function(c){var b=this;var d=this.elems.form.serialize();this.elems.optionsSection.find("#slidedeck-section-lenses .lens").removeClass("selected");c.closest(".lens").addClass("selected");a.ajax({url:ajaxurl,type:"GET",data:d+"&action=slidedeck_change_lens",dataType:"json",success:function(e){b.elems.optionsSection.find(".inner").html(e.options_html);b.elems.optionsSection.find(".fancy").fancy();SlideDeckPlugin.OptionsNav.initialize();b.elems.optionsSection.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.slidedeck,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X});b.elems.optionsSection.find("input.color-picker").miniColors({change:function(g,f){this.trigger("change")}});b.elems.optionsSection.find('input[type="text"]').each(function(){a.data(this,"previousValue",a(this).val())});b.checkDisableCoversUI();a("body").trigger("slidedeck:lens-change-update-choices");SlideDeckPreview.ajaxUpdate();if(!b.loadedScripts[e.lens.slug]){if(e.lens.admin_script_url){a("head").append('<script type="text/javascript" src="'+e.lens.admin_script_url+'"><\/script>');b.loadedScripts[e.lens.slug]=e.lens.admin_script_url}}if(typeof(SlideDeckLensAdmin[e.lens.slug])=="function"){SlideDeckLensAdmin[e.lens.slug]()}}})},checkDisableCoversUI:function(){var c=this;var b=c.elems.optionsSection.find("#slidedeck-sizes :checked").val();if(b=="small"){c.elems.optionsSection.find("#slidedeck-covers").append('<div class="disabled-mask"></div>')}else{c.elems.optionsSection.find("#slidedeck-covers .disabled-mask").remove()}},initialize:function(){var b=this;this.elems.optionsSection=a("#slidedeck-section-options");this.elems.lensesSection=this.elems.optionsSection.find("#slidedeck-section-lenses");if(this.elems.lensesSection.length<1){return false}this.elems.lenses=this.elems.lensesSection.find(".lens");this.elems.form=a("#slidedeck-update-form");this.elems.sizes=a("#slidedeck-sizes");this.elems.optionsSection.delegate('#slidedeck-section-lenses input[type="radio"]',"click",function(){var c=a.data(this,"$this");if(!c){c=a(this);a.data(this,"$this",c)}b.select(c)});b.checkDisableCoversUI();this.elems.lenses.each(function(d){var e=b.elems.lenses.eq(d);var c=e.find('input[name="lens"]').val();if(typeof(SlideDeckLensAdmin[c])=="function"){SlideDeckLensAdmin[c]()}})},updateChoices:function(){var b=this;var c=this.elems.optionsSection.find('#slidedeck-section-lenses input[name="lens"]:checked').val();a.ajax({url:ajaxurl,data:{action:"slidedeck_update_available_lenses",slidedeck_id:a("#slidedeck_id").val(),_wpnonce:a('[name="_wpnonce_update_available_lenses"]').val()},success:function(d){b.elems.lensesSection=b.elems.optionsSection.find("#slidedeck-section-lenses");b.elems.lensesSection.html(d);var e=b.elems.optionsSection.find('#slidedeck-section-lenses input[name="lens"]:checked').val();if(e!=c){b.elems.lensesSection.find('input[name="lens"]:checked').click()}else{SlideDeckPreview.ajaxUpdate()}}})}};SlideDeckPlugin.OptionsNav={elems:{},height:0,deckLoaded:function(c){var b=this;b.elems.navigation=a("#slidedeck-options-groups .verticalSlideNav");b.elems.navigation.delegate("a","click",function(d){d.preventDefault();b.goTo(this.href.split("#")[1]);if(b.elems.navigation.find("a").index(this)===0){a("#slidedeck-options-groups dl.slidedeck").addClass("top")}else{a("#slidedeck-options-groups dl.slidedeck").removeClass("top")}});b.goTo(1);if(a(b.elems.navigation.find("a")[0]).hasClass("nav_1")){a("#slidedeck-options-groups dl.slidedeck").addClass("top")}},goTo:function(b){var d=b-1;var c=this.elems.optionsGroupsLists.eq(d);a("#slidedeck-section-options > div.inner").css({height:"auto"});this.elems.optionsGroups.stop().animate({height:c.outerHeight()},this.elems.slidedeck.slidedeck().speed);this.elems.slidedeck.stop().animate({height:c.outerHeight()-1},this.elems.slidedeck.slidedeck().speed)},interfaces:function(){var m=this;for(var n in SlideDeckInterfaces){var j=SlideDeckInterfaces[n];var c=a("#"+n);if(c.length&&!c.is('input[type="hidden"]')){switch(j.type){case"thumbnails":var c=a("#"+n);c.wrap('<div class="slidedeck2-thumbnail-picker-wrapper"></div>');var g="";for(var q in j.values){g+='<span class="thumbnail'+(q==c.val()?" selected":"")+'" data-value="'+q+'"><span style="background-image:url('+slideDeck2URLPath+j.values[q]+');"></span></span>'}c.closest(".slidedeck2-thumbnail-picker-wrapper").append('<span class="slidedeck2-thumbnail-picker">'+g+"</span>");a(".slidedeck2-thumbnail-picker").delegate(".thumbnail","click",function(v){var y=a.data(this,"$this"),i=a.data(this,"$select"),x=a.data(this,"$thumbnail");if(!y){y=a(this);a.data(this,"$this",y)}if(!i){i=y.closest(".slidedeck2-thumbnail-picker-wrapper").find("select");a.data(this,"$select",i)}if(!x){x=y.closest(".thumbnail");a.data(this,"$thumbnail",x)}var z=a.data(i[0],"$thumbnails");if(!z){z=y.closest(".slidedeck2-thumbnail-picker").find(".thumbnail").siblings(".thumbnail");a.data(i[0],"$thumbnails",z)}var w=y.attr("data-value");i.find("option").each(function(){if(this.value==w){this.selected=true}else{this.selected=false}});i.val(w).trigger("change");z.removeClass("selected");x.addClass("selected")});break;case"thumbnails-flyout":var c=a("#"+n);c.wrap('<div id="slidedeck-2-thumbnail-picker-wrapper-'+n+'" class="slidedeck2-thumbnail-picker-wrapper"><span class="thumbnail-select"><span class="selected"></span></span></div>');var p=a(c.closest(".slidedeck2-thumbnail-picker-wrapper")[0]);var d=a(p.find("span.thumbnail-select")[0]);var s=a(p.find("span.selected")[0]);var g="";for(var q in j.values){var e=j.values[q];if(!e.match(/^http(s)?\:\/\//)){e=slideDeck2URLPath+j.values[q]}g+='<span class="thumbnail'+(q==c.val()?" selected":"")+'" data-value="'+q+'"><span style="background-image:url('+e+');"></span></span>'}var b=a("#slidedeck2-thumbnail-flyout-"+n);if(b.length<1){a("body").append('<div id="slidedeck2-thumbnail-flyout-'+n+'" class="slidedeck2-thumbnail-flyout" style="display:none;"><span class="slidedeck2-thumbnail-picker clearfix"></span></div>');b=a("#slidedeck2-thumbnail-flyout-"+n)}b.find(".slidedeck2-thumbnail-picker").html(g);var t=a("#slidedeck2-thumbnail-flyout-"+n+" .thumbnail.selected span").css("background-image").match(/url\([\'|\"]?([^\'|\"]+)[\'|\"]?\)/)[1];s.append('<img src="'+t+'" alt="" />');a("body").bind("click",function(v){var i=a(v.target);if((i.closest(".slidedeck2-thumbnail-flyout").length<1)&&(i.closest(".thumbnail-select").length<1)){a(".slidedeck2-thumbnail-flyout:visible").hide()}});p.delegate(".selected","click",function(w){var C=a.data(this,"$this");if(!C){C=a(this);a.data(this,"$this",C)}var z=C.offset();var A=C.closest(".slidedeck2-thumbnail-picker-wrapper").find("select").attr("id");var B=a("#slidedeck2-thumbnail-flyout-"+A);var y=z.top,v=a(window).height(),x=a(window).scrollTop(),i=B.outerHeight();if(((i+z.top)>(v+x))&&(v>i)&&((z.top-x)>i)){B.addClass("invert");y=y-i-2}else{B.removeClass("invert");y=y+d.outerHeight()+2}if(B.is(":visible")){B.hide()}else{B.css({top:y,left:z.left}).show()}});a(".slidedeck2-thumbnail-flyout").delegate(".thumbnail","click",function(w){var A=a.data(this,"$this"),v=a.data(this,"$select"),y=a.data(this,"$thumbnail");if(!A){A=a(this);a.data(this,"$this",A)}var i=A.closest(".slidedeck2-thumbnail-flyout").attr("id").replace("slidedeck2-thumbnail-flyout-","");if(!v){v=a("#"+i);a.data(this,"$select",v)}if(!y){y=A.closest(".thumbnail");a.data(this,"$thumbnail",y)}var B=a.data(v[0],"$thumbnails");if(!B){B=A.closest(".slidedeck2-thumbnail-picker").find(".thumbnail").siblings(".thumbnail");a.data(v[0],"$thumbnails",B)}var x=A.attr("data-value");v.find("option").each(function(){if(this.value==x){this.selected=true}else{this.selected=false}});v.val(x).trigger("change");B.removeClass("selected");y.addClass("selected");var z=y.find("span").css("background-image").match(/url\([\'|\"]?([^\'|\"]+)[\'|\"]?\)/)[1];a("#slidedeck-2-thumbnail-picker-wrapper-"+i+" .thumbnail-select .selected img").attr("src",z);A.closest(".slidedeck2-thumbnail-flyout").hide()});break;case"slider":var o={animate:true,min:1,max:100,orientation:"horizontal",range:false,step:1};var h={};for(var u in o){if(j[u]){h[u]=j[u]}else{h[u]=o[u]}}a("#"+n).wrap('<div class="slidedeck2-slider-wrapper"></div>');a("#"+n).before('<div id="'+n+'-slider" class="slidedeck2-slider"><span class="min">'+(j.minLabel?j.minLabel:h.min)+'</span><span class="max">'+(j.maxLabel?j.maxLabel:h.max)+"</span></div>");var r=a("#"+n+"-slider");if(c.is("select")){r.after('<span class="selected">'+c.find("option:selected").text()+"</span>")}if(j.marks){var l=(h.max-h.min);var f=(l/h.step);var k="";for(var q=0;q<f;q++){k+='<span class="mark" style="width:'+(100/f)+'%">'+(h.min+(h.step*(q+1)))+"</span>"}r.append('<span class="marks">'+k+"</span>")}h.value=c.val();h.slide=function(i,v){var w=a.data(this,"$input");if(!w){var w=a("#"+v.handle.parentNode.id.replace("-slider",""));a.data(this,w)}if(w.is('input[type="text"]')){w.val(v.value)}else{if(w.is("select")){w.find("option").each(function(){if(this.value==v.value){this.selected=true}else{this.selected=false}});a(v.handle.parentNode).next(".selected").text(w.find("option:selected").text())}}};h.change=function(i,v){var w=a.data(this,"$input");if(!w){var w=a("#"+v.handle.parentNode.id.replace("-slider",""));a.data(this,"$input",w)}if(SlideDeckInterfaces[w.attr("id")].update){m.interfaceUpdate(w.val(),"slider",SlideDeckInterfaces[w.attr("id")].update)}SlideDeckPreview.update(w[0],w.val())};r.slider(h);a("#"+n).bind("keyup",function(v){var i=this;if(this.sliderTimer){clearTimeout(i.sliderTimer)}this.sliderTimer=setTimeout(function(){a("#"+i.id+"-slider").slider("value",i.value)},250);return true});break}}}},interfaceUpdate:function(d,c,b){switch(c){case"slider":var e=a("#options-"+b.option);e.val(Math.min(parseInt(e.val(),10),parseInt(d,10)));var f=a("#options-"+b.option+"-slider");if(f.length){f.slider("option",b.value,d);if(b.value=="min"){f.find(".min").text(d)}else{if(b.value=="max"){f.find(".max").text(d)}}f.slider("value",parseInt(e.val(),10))}break}},initialize:function(){var b=this;this.elems.optionsGroups=a("#slidedeck-options-groups");if(this.elems.optionsGroups.length<1){return false}this.elems.optionsSection=a("#slidedeck-section-options");this.interfaces();this.elems.optionsGroupsLists=this.elems.optionsGroups.find(".options-list");this.elems.slidedeck=this.elems.optionsGroups.find(".slidedeck");this.elems.optionsGroupsLists.css("min-height",this.elems.optionsGroupsLists.length*84);this.elems.optionsGroupsLists.each(function(c){b.height=Math.max(b.elems.optionsGroupsLists.eq(c).outerHeight(),b.height)});this.elems.slidedeck.height(this.height);this.elems.slidedeck.slidedeck({scroll:false,keys:false}).loaded(function(c){b.deckLoaded(c)}).vertical({scroll:false});this.elems.optionsGroups.delegate('#slidedeck-sizes input[type="radio"]',"click",function(){SlideDeckPlugin.LensManager.checkDisableCoversUI()});a(window).resize(function(){b.resize()})},resize:function(){var b=this;this.elems.slidedeck.find("dd").add(".slidesVertical").width(this.elems.slidedeck.width());this.height=0;this.elems.optionsGroupsLists.each(function(c){this.style.height="";b.height=Math.max(b.elems.optionsGroupsLists.eq(c).outerHeight(),b.height)});this.elems.slidedeck.height(this.height).find("dd").height(this.height);this.elems.optionsGroups.stop().animate({height:this.elems.optionsGroupsLists.eq(this.elems.slidedeck.slidedeck().vertical().current).innerHeight()+"px"},500);this.elems.slidedeck.stop().animate({height:(this.elems.optionsGroupsLists.eq(this.elems.slidedeck.slidedeck().vertical().current).innerHeight()-1)+"px"},500)}};SlideDeckPlugin.SourceManager={elems:{},slidedeckId:null,deleteSource:function(c){var b=this;var d=a(c).closest(".slidedeck-content-source").find('input[name="source[]"]').val();a.ajax({url:c.href,data:"source="+d+"&slidedeck="+this.slidedeckId,type:"POST",success:function(e){if(e!="false"){b.elems.contentControl.html(e);b.elems.contentControl.find(".fancy").fancy();b.elems.contentControl.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X});SlideDeckPlugin.LensManager.updateChoices()}}})},open:function(c){var b=this;a.ajax({url:c,type:"GET",success:function(d){b.modal.open(d)}})},select:function(e){var c=this;var b=a(e).closest("form");var g=b.serializeArray();var f="create";for(var d in g){if(g[d].name=="action"){f=g[d].value}}if(f=="create"){b.submit()}else{a.ajax({url:ajaxurl,type:"GET",data:this.elems.form.serialize()+"&"+b.serialize(),success:function(h){if(h!="false"){c.elems.contentControl.html(h);c.elems.contentControl.find(".fancy").fancy();c.elems.contentControl.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X});SlideDeckPlugin.LensManager.updateChoices()}}})}},initialize:function(){var b=this;this.elems.head=a("head");this.elems.body=a("body");this.elems.form=a("#slidedeck-update-form");this.elems.contentControl=a("#slidedeck-content-control");this.slidedeckId=a("#slidedeck_id").val();if(typeof(SimpleModal)!="undefined"){this.modal=new SimpleModal({context:"source",onComplete:function(c){c.elems.modal.find('input[type="radio"]').bind("click",function(){var d=a(this).closest("label");d.closest(".sources").find("label").removeClass("active");d.addClass("active");b.select(this);c.close()})}})}a("body").delegate("a.slidedeck-source-modal","click",function(c){c.preventDefault();b.open(this.href)});a("#slidedeck-update-form").delegate(".delete.link","click",function(c){c.preventDefault();if(confirm("Are you sure you wish to delete this source?")){b.deleteSource(this)}})}};SlideDeckPlugin.CoversEditor={elems:{},importedFonts:{},onComplete:function(g){var e=this;this.elems.modal=g.elems.modal;this.elems.form=this.elems.modal.find("form");this.elems.frontOptions=this.elems.modal.find(".options-list.front-options");this.elems.backOptions=this.elems.modal.find(".options-list.back-options");this.elems.preview=this.elems.modal.find("#slidedeck-covers-preview");this.elems.frontCover=this.elems.preview.find(".slidedeck-cover-front");this.elems.frontBindingColor=this.elems.frontCover.find(".slidedeck-cover-binding .slidedeck-cover-color");this.elems.frontTitle=this.elems.frontCover.find(".slidedeck-cover-title");this.elems.frontBack=this.elems.frontCover.find(".slidedeck-cover-wrapper-back");this.elems.frontButtonAccent=this.elems.frontCover.find(".slidedeck-cover-open .slidedeck-cover-color");this.elems.curatedBy=this.elems.frontCover.find(".slidedeck-cover-curatedby");this.elems.backCover=this.elems.preview.find(".slidedeck-cover-back");this.elems.backBindingColor=this.elems.backCover.find(".slidedeck-cover-binding .slidedeck-cover-color");this.elems.backTitle=this.elems.preview.find(".slidedeck-cover-title");this.elems.backCopy=this.elems.preview.find(".slidedeck-cover-bodycopy");this.elems.backButton=this.elems.preview.find(".slidedeck-cover-button");this.elems.backCoverCTAColor=this.elems.preview.find(".slidedeck-cover-cta .slidedeck-cover-color");this.elems.backButtonText=this.elems.backButton.find("span.text");this.elems.backBack=this.elems.backCover.find(".slidedeck-cover-wrapper-back");this.elems.backButtonAccent=this.elems.backCover.find(".slidedeck-cover-restart .slidedeck-cover-color");this.elems.toggles=this.elems.modal.find("#slidedeck-covers-swap .toggle");this.elems.modal.find(".slidedeck-cover-mask").animate({opacity:0.8});this.elems.modal.find("input, select, textarea").fancy();var c=this.elems.modal.find(".color-picker");c.miniColors({change:function(j,i){this.trigger("change")}});if(!__hasSavedCovers){var h=a("#options-accentColor");if(h.val()!==""){c.val(h.val());c.trigger("keyup")}}this.elems.modal.find(".cancel-modal").bind("click",function(i){i.preventDefault();g.close()});this.elems.form.bind("submit",function(i){i.preventDefault();a.ajax({url:document.location.href.replace(document.location.search,""),data:e.elems.form.serialize(),type:"POST",success:function(j){g.close();SlideDeckPreview.ajaxUpdate();__hasSavedCovers=true}})});this.elems.modal.find("#back_title").bind("keyup",function(){e.elems.backTitle.html(this.value.replace(/\n/,"<br/>"))});this.elems.modal.find("#button_label").bind("keyup",function(){e.elems.backButtonText.html(this.value)});this.elems.modal.find("#button_url").bind("keyup",function(){e.elems.backButton.attr("href",this.value)});this.elems.modal.find("#front_title").bind("keyup",function(){e.elems.frontTitle.html(this.value.replace(/\n/,"<br/>"))});var f=this.elems.modal.find("#title_font");f.bind("change",function(){var j=a(this).find("option:selected").val();var i=e.fonts[j];if(i["import"]){if(!e.importedFonts[j]){a("head").append('<link href="'+i["import"]+'" rel="stylesheet" type="text/css" />');e.importedFonts[j]=true}}if(this.id=="title_font"){e.elems.frontTitle.css("font-family",i.stack);if(i.weight){e.elems.frontTitle.css("font-weight",i.weight)}e.elems.backTitle.css("font-family",i.stack);if(i.weight){e.elems.backTitle.css("font-weight",i.weight)}}else{if(this.id=="copy_font"){e.elems.backCopy.css("font-family",i.stack)}}}).trigger("change");if(!__hasSavedCovers){var d=a("#options-titleFont");if(d.val()!==""){var b="";f.find("option").each(function(){if(this.value==d.val()){this.selected=true;b=this.text}else{this.selected=false}});f.closest(".fancy-select").find(".selected").text(b);f.trigger("change")}}this.elems.modal.find("#accent_color").bind("change",function(){var m=Raphael.getRGB(this.value);var l=Raphael.rgb2hsb(m.r,m.g,m.b);l.s=l.s*0.2;l.b=1;var k=Raphael.rgb2hsb(m.r,m.g,m.b);k.s=k.s*0.05;k.b=1;var j="90-hsb("+l.h+","+l.s+","+l.b+")-hsb("+k.h+","+k.s+","+k.b+")";if(e.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-shine")){e.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-shine").attr("fill",j)}if(e.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-background")){e.elems.modal.find(".frosted-glass").data("slidedeck-frosted-cover-background").attr("fill",j)}if(e.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-shine")){e.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-shine").attr("fill",j)}if(e.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-background")){e.elems.modal.find(".frosted-glass-back").data("slidedeck-frosted-cover-back-background").attr("fill",j)}e.elems.frontBindingColor.css("background-color",this.value);e.elems.backBindingColor.css("background-color",this.value);e.elems.backCoverCTAColor.css("background-color",this.value);if(e.elems.frontButtonAccent.data("slidedeck-cover-shape")){var o=e.elems.frontButtonAccent.data("slidedeck-cover-shape");if(jQuery.isArray(o)){for(var n=0;n<o.length;n++){o[n].attr("fill",this.value)}}else{o.attr("fill",this.value)}}else{e.elems.frontButtonAccent.css("background-color",this.value)}if(e.elems.backButtonAccent.data("slidedeck-cover-shape")){var o=e.elems.backButtonAccent.data("slidedeck-cover-shape");if(jQuery.isArray(o)){for(var n=0;n<o.length;n++){o[n].attr("fill",this.value)}}else{o.attr("fill",this.value)}}else{e.elems.backButtonAccent.css("background-color",this.value)}}).trigger("change");this.elems.modal.find('[name="show_curator"]').bind("click",function(){var i=this.value==1?true:false;if(i){e.elems.curatedBy.show()}else{e.elems.curatedBy.hide()}});this.elems.modal.find('[name="peek"]').bind("click",function(){var i=this.value==1?true:false;if(i){e.elems.preview.addClass("slidedeck-cover-peek")}else{e.elems.preview.removeClass("slidedeck-cover-peek")}e.elems.modal.find("#cover_style").trigger("change")});this.elems.modal.find("#cover_style").bind("change",function(){var m=a(this).find("option:selected").val();a(this).find("option").each(function(){if(!this.selected){e.elems.preview.removeClass("slidedeck-cover-style-"+this.value)}});e.elems.preview.addClass("slidedeck-cover-style-"+m);e.elems.preview.find(".slidedeck-cover-color").data("slidedeck-cover-shape",false).find("svg").remove();if(SlideDeckCoverPostProcessFront[m]){SlideDeckCoverPostProcessFront[m](e.elems.preview.find(".slidedeck-cover-nav-button"),e.elems.preview.hasClass("slidedeck-cover-peek"))}if(SlideDeckCoverPostProcessBack[m]){SlideDeckCoverPostProcessBack[m](e.elems.preview.find(".slidedeck-cover-nav-button.slidedeck-cover-restart"),e.elems.preview.hasClass("slidedeck-cover-peek"))}if(e.elems.modal.find(".toggle-back.selected").length===0){e.elems.preview.find(".slidedeck-cover-back").css({visibility:"hidden"})}e.elems.modal.find("#accent_color").trigger("change");var o=e.elems.modal.find("#variation");var n=o.find("option").filter(":selected").val();var k="";for(var l in e.variations[m]){if(n==l){k+='<option selected="selected" value="'+l+'">'+e.variations[m][l]+"</option>"}else{k+='<option value="'+l+'">'+e.variations[m][l]+"</option>"}}if(!a.isEmptyObject(e.variations[m])){var j=e.elems.modal.find("#variation").closest("li");j.slideDown(500);j.find(".fancy-select, select.fancy").remove();j.find(".inner").append('<select class="fancy" id="variation" name="variation" style="">'+k+"</select>");j.find(".fancy").fancy();j.find(".fancy").trigger("change")}else{e.elems.modal.find("#variation").closest("li").slideUp(500)}}).trigger("change");this.elems.modal.find(".options-list.global-options").delegate("#variation","change",function(){a(this).find("option").each(function(){if(!this.selected){e.elems.preview.removeClass("slidedeck-cover-"+this.value)}});e.elems.preview.addClass("slidedeck-cover-"+a(this).find("option:selected").val())}).trigger("change");this.elems.modal.delegate(".toggle","click",function(i){i.preventDefault();var j=a.data(this,"$this");if(!j){j=a(this);a.data(this,"$this",j)}e.elems.toggles.removeClass("selected");j.addClass("selected");e.toggle(this.href.split("#")[1])})},open:function(){var b=this;var c=this.elems.slidedeckPreview.attr("src").match(/slidedeck\=([\d]+)/)[1];this.elems.link.attr("href",this.elems.link.attr("href").replace(/slidedeck\=([\d]+)/,"slidedeck="+c));if(!this.modal){this.modal=new SimpleModal({context:"covers",onComplete:function(d){b.onComplete(d)}})}a.get(this.elems.link.attr("href"),function(d){b.modal.open(d)})},toggle:function(b){switch(b){case"front":this.elems.frontCover.css({visibility:"visible"});this.elems.backCover.css({visibility:"hidden"});this.elems.frontOptions.css("height","auto");this.elems.backOptions.css("height",0);break;case"back":this.elems.frontCover.css({visibility:"hidden"});this.elems.backCover.css({visibility:"visible"});this.elems.frontOptions.css("height",0);this.elems.backOptions.css("height","auto");break}},initialize:function(){var b=this;this.elems.link=a("#slidedeck-covers-modal-link");if(this.elems.link.length<1){return false}this.elems.slidedeckPreview=a("#slidedeck-preview");this.elems.slidedeckOptions=a("#slidedeck-section-options");this.elems.showFrontCoverField=a('input[name="options[show-front-cover]"]');this.elems.showBackCoverField=a('input[name="options[show-back-cover]"]');this.elems.slidedeckOptions.delegate("#slidedeck-covers-modal-link","click",function(c){c.preventDefault();b.open()})}};SlideDeckPlugin.beforeUnload={initialize:function(){var b=this;this.form=a("#slidedeck-update-form");if(this.form.length<1){return false}this.originalSerialize=this.form.serialize();window.onbeforeunload=function(){if(b.originalSerialize!=b.form.serialize()){return"You have unsaved changes to this SlideDeck. Are you sure you want to leave without saving?"}};this.form.bind("submit",function(){window.onbeforeunload=null})}};a(document).ready(function(){a("#slidedeck-insert-iframe-section-header").find(".fancy").fancy();a("#slidedeck-update-form, #slidedeck-option-wrapper").find(".fancy").fancy();SlideDeckPlugin.DOMUtilities.initialize();SlideDeckPlugin.OptionsNav.initialize();SlideDeckPlugin.SourceManager.initialize();SlideDeckPlugin.LensManagement.initialize();SlideDeckPlugin.LensManager.initialize();SlideDeckPlugin.InsertModal.initialize();SlideDeckPlugin.CoversEditor.initialize();SlideDeckPlugin.beforeUnload.initialize();if(a("#slidedeck-table").length===0){if(typeof(a.fn.tooltipper)=="function"){a(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X})}}else{if(typeof(a.fn.tooltipper)=="function"){a("#slidedeck-table .tooltip").tooltipper({speed:0,delay:0,namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y-10,offsetX:tooltipperOffset.X})}}if(typeof(a.fn.miniColors)=="function"){a("input.color-picker").miniColors({change:function(j,i){this.trigger("change")}})}a("#slidedeck-table").delegate(".slidedeck-preview-link","click",function(i){i.preventDefault();var n=a.data(this,"$this"),q=a.data(this,"$iframe"),j=a.data(this,"$td"),p=this.href,k=parseInt(this.href.match(/\&width=(\d+)/)[1],10);height=parseInt(this.href.match(/\&height=(\d+)/)[1],10);if(!n){n=a(this);a.data(this,"$this",n)}if(n.hasClass("animating")){return false}n.addClass("animating");if(!q){var m=n.attr("data-for");q=a("#"+m);a.data(this,"$iframe",q)}if(q.hasClass("open")){q.removeClass("open").animate({height:0,marginTop:0,marginBottom:0},500,function(){q[0].src="about:blank";n.removeClass("animating")})}else{q.css("width",k).animate({height:height,marginTop:20,marginBottom:20},500,function(){q[0].src=p;n.removeClass("animating")}).addClass("open");if(SlideDeckAnonymousStats.optin==true){var o=n.closest(".slidedeck-row").find(">img.icon").attr("src").indexOf("/custom/images/icon.png")!=-1?true:false;var l=new Image();l.src="http://trk.kissmetrics.com/e?_k="+SlideDeckAnonymousStats.apikey+"&_p="+SlideDeckAnonymousStats.hash+"&_n="+escape("Preview SlideDeck")+"&"+escape("SlideDeck Type")+"="+(o?"custom":"dynamic")}}}).delegate(".slidedeck-getcode-link","click",function(j){j.preventDefault();var k=a.data(this,"$this"),i=a.data(this,"modal");if(!k){k=a(this);a.data(this,"$this",k)}if(!i){i=new SimpleModal({context:"firstsave",onComplete:function(l){SlideDeckPlugin.FirstSaveDialog.onComplete(l);a("#get-code-close").delegate("a.close","click",function(m){m.preventDefault();l.close()})}})}a.get(k.attr("href"),function(l){i.open(l)})});a("#slidedeck-update-form").delegate("#gplus-how-to","click",function(i){i.preventDefault();SlideDeckPlugin.GplusPostsModal.open()});a("#slidedeck-update-form").delegate(".configure-source","click",function(i){i.preventDefault();var j=a(this).siblings(".slidedeck-content-source");a(".slidedeck-content-source").not(j).addClass("hidden");j.toggleClass("hidden");if(!j.hasClass("hidden")){a("body").bind("click.hideFlyout",function(k){if(a(k.target).parents("div.slidedeck-content-source").length==0){if(!a(k.target).parent().hasClass("configure-source")){}}})}else{a("body").unbind("click.hideFlyout")}});a("#slidedeck-update-form").delegate(".cancel.link","click",function(i){i.preventDefault();a(this).closest(".slidedeck-content-source").addClass("hidden");a("body").unbind("click.hideFlyout")});if(a(".slidedeck-content-source .cache-slider").length){var f=a(this);var h=f.closest(".slidedeck-content-slider");var b=h.find('[name="options[feedCacheDuration]"]');var g=[60,300,600,900,1800,2700,3600,7200,10800,21600,43200,86400];var c=["1 minute","5 minutes","10 minutes","15 minutes","30 minutes","45 minutes","1 hour","2 hours","3 hours","6 hours","12 hours","1 day"];var e=a.inArray(parseInt(b.val(),10),g);if(e==-1){e=3}a(".slidedeck-content-source .cache-slider").slider({value:e,animate:true,min:0,max:11,step:1,slide:function(i,j){h.find(".cache-slider-value").html(c[j.value]);b.val(g[j.value])},create:function(i,j){h.find(".cache-slider-value").html(c[e])}})}a("#slidedeck-update-form").delegate(".slidedeck-form-section.collapsible .hndl","click",function(j){var n=a.data(this,"$this"),r=a.data(this,"$inner"),m=a.data(this,"$section"),k=a.data(document.body,"slidedeck_id");if(!n){n=a(this);a.data(this,"$this",n)}if(n.hasClass("animating")){return false}n.addClass("animating");if(!k){k=a("#slidedeck_id").val();a.data(document.body,"slidedeck_id",k)}if(!r){r=n.closest(".hndl-container").next(".inner");a.data(this,"$inner",r)}if(!m){m=n.closest(".slidedeck-form-section.collapsible");a.data(this,"$section",m)}var p=m.prop("id");var o="hide--"+k+"--"+p;var q=null;var i=a.data(r[0],"inner_height");var l=i;if(m.hasClass("closed")){m.removeClass("closed")}else{a.data(r[0],"inner_height",r.height());m.addClass("closed");l=0;q=1}r.animate({height:l+"px"},500,function(){n.removeClass("animating")});a.cookie(o,q)}).find(".slidedeck-form-section.collapsible").each(function(){var k=a(this);var l=k.find(".inner");var i=l.closest(".slidedeck-form-section.collapsible");var j=a.data(document.body,"slidedeck_id");if(!j){j=a("#slidedeck_id").val();a.data(document.body,"slidedeck_id",j)}a.data(this,"$inner",l);a.data(this,"$section",i);a.data(l[0],"inner_height",l.height());if(a.cookie("hide--"+j+"--"+this.id)){k.addClass("closed");l.css("height",0)}});a("#preview-textures a").bind("click",function(k){k.preventDefault();var m=a.data(this,"$this"),n=a.data(this,"$chicklets"),i=a.data(this,"$stage");if(!m){m=a(this);a.data(this,"$this",m)}if(!n){n=a("#preview-textures").find("a");a.data(this,"$chicklets",n)}if(!i){i=a("#slidedeck-section-preview").find(".inner");a.data(this,"$stage",i)}n.removeClass("active");a("#preview-textures").find("li").removeClass("active");m.addClass("active");m.closest("li").addClass("active");var l=new RegExp("background=([a-zA-Z0-9-_]+)");var j=this.href.match(l)[1];n.each(function(){var o=this.href.match(l)[1];if(j==o){i.addClass("texture-"+o)}else{i.removeClass("texture-"+o)}});a.ajax({url:ajaxurl,data:this.href.split("?")[1],type:"POST"})});if(a("#form_action").val()=="create"){a("#titlewrap #title").css({color:"#999",fontStyle:"italic"}).focus(function(i){this.style.color="";this.style.fontStyle="";if(this.value==this.defaultValue){this.value=""}})}a("#title-display").bind("click",function(i){i.preventDefault();a("#titlewrap").addClass("editing");a("#title").focus()});a("#title").bind("blur",function(i){if(a("#form_action").val()!="create"){a("#titlewrap").removeClass("editing")}}).bind("keydown keyup",function(i){if(i.keyCode!=13&&i.keyCode!=27){var j=a("#title-display").find(".title").text(this.value).width();a("#title").css("min-width",j+50)}else{a(this).blur()}});if(a(".license-key-text-field").length){a(".slidedeck-license-key-wrapper").delegate(".verify-license-key.button","click",function(i){i.preventDefault();a.ajax({url:ajaxurl+"?action=slidedeck_verify_license_key&verify_license_nonce="+a("#verify_license_nonce").val()+"&key="+a(".license-key-text-field").val(),success:function(j){a(".license-key-verification-response").html(j)}})});a(".slidedeck-license-key-wrapper .verify-license-key").click()}if(a(".license-key-text-field").length){a(".slidedeck-license-key-wrapper").delegate(".verify-license-key.button","click",function(i){i.preventDefault();a.ajax({url:ajaxurl+"?cachebreaker="+Math.floor(Math.random()*100000)+"&"+a(this).parents("form").serialize(),success:function(j){a(".addon-verification-response").html(j).find("a").each(function(){if(SlideDeckAnonymousStats.optin==true){if(this.href.match(/dtelepathy\.com/)){this.search+="&kmi="+SlideDeckAnonymousStats.hash}}})}})});a(".slidedeck-license-key-wrapper .verify-license-key").click()}a("#slidedeck-table").delegate("form.delete-slidedeck","submit."+SlideDeckPlugin.namespace,function(j){j.preventDefault();var m=a(this);var n=m.closest("li");var i=n.parents(".inner");var l=n.next("div.slidedeck-preview-wrapper");var k=m.closest("ul");if(confirm("Are you sure you want to delete this SlideDeck?\nThis CANNOT be undone.")){a.ajax({url:document.location.href,type:this.method,data:m.serialize(),success:function(){n.fadeOut(500,function(){n.remove();l.remove();if(k.find("li").length<1){i.remove();a("#no-decks-placeholder").show()}})}})}});a("#slidedeck-table").delegate("form.duplicate-slidedeck","submit."+SlideDeckPlugin.namespace,function(j){j.preventDefault();var k=a(this);var i=a("#slidedeck-table").find(".float-wrapper .left");k.closest(".slidedeck-duplicate").addClass("loading");a.ajax({url:document.location.href,type:this.method,data:k.serialize(),success:function(l){if(l!="false"){i.html(l);a(".tooltipper.slidedeck").remove();i.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X})}}})});a("#delete-slidedeck").bind("click",function(i){i.preventDefault();var k=this.href.match(/slidedeck(\=|\%3D)([\d]+)/)[2];var j=this.href.match(/_wpnonce(\=|\%3D)([a-zA-Z0-9]+)/)[2];if(confirm("Are you sure you want to delete this SlideDeck?\nThis CANNOT be undone.")){a.ajax({url:document.location.href.replace(document.location.search,""),type:"POST",data:"slidedeck="+k+"&_wpnonce="+j+"&redirect=1",success:function(l){document.location.href=l}})}});a("#template_snippet_w, #template_snippet_h").bind("keyup."+SlideDeckPlugin.namespace,function(j){var i=this;if(this.timer){clearTimeout(i.timer)}this.timer=setTimeout(function(){var k=a("#template_snippet_w").val(),l=a("#template_snippet_h").val(),n=a("#slidedeck_id").val();var m="<?php slidedeck( "+n+", array( 'width' => '"+k+"', 'height' => '"+l+"' ) ); ?>";a("#slidedeck-template-snippet").val(m)},100);return true});a("#slidedeck-template-snippet").focus(function(){this.select()});updateTBSize();if(a("#slidedeck-blog-rss-feed").length){a.ajax({url:ajaxurl,data:"action=slidedeck2_blog_feed",type:"GET",complete:function(k){var i=k.responseText;var j=a("#slidedeck-blog-rss-feed");if(i!="false"){j.html(k.responseText)}else{j.text("Unable to connect to feed!")}}})}if(a("#slidedeck-latest-tweets").length){a.ajax({url:ajaxurl,data:"action=slidedeck2_tweet_feed",type:"GET",complete:function(m){var k=m.responseText;var o=a("#slidedeck-latest-tweets");if(k!="false"){o.html(m.responseText);var p=o.find(".slidedeck").slidedeck({hideSpines:true,keys:false,scroll:false,autoPlay:true,cycle:true});o.find("a.navigation").click(function(i){i.preventDefault();p.pauseAutoPlay=true;if(this.href.match(/next/)){p.next()}else{p.prev()}});var j=p.slides.length;var n=o.find(".nav-wrapper");var l=1;while(l<=j&&l<=10){jQuery('<span class="nav-dot">&bull;</span>').appendTo(n);l++}n.find(".nav-dot").click(function(){var i=jQuery(this);n.find(".nav-dot").removeClass("active");i.addClass("active");p.pauseAutoPlay=true;p.goTo(i.index()+1)});p.options.before=function(i){o.find(".nav-dot").removeClass("active");o.find(".nav-dot").eq(i.current-1).addClass("active")};p.loaded(function(i){o.find(".nav-dot").eq(i.current-1).addClass("active")});o.find(".nav-wrapper").css({marginLeft:"-"+Math.round(o.find(".nav-wrapper").outerWidth()/2)+"px"})}else{o.text("Unable to connect to Twitter!")}}})}if(a("#slidedeck-sizes").length){a("#slidedeck-section-options").delegate('#slidedeck-sizes input[type="radio"]',"click",function(i){if(this.value=="custom"){a("#slidedeck-custom-dimensions").addClass("selected").animate({height:32,opacity:1},500,function(){SlideDeckPlugin.OptionsNav.resize()}).find("input").each(function(){this.disabled=false})}else{a("#slidedeck-custom-dimensions").removeClass("selected").animate({height:0,opacity:0},500,function(){SlideDeckPlugin.OptionsNav.resize()}).find("input").each(function(){this.disabled=true})}})}a("#slidedeck-table-sort-select").bind("change",function(k){var l=a.data(this,"$this"),i=a.data(this,"$form"),j=a.data(this,"$table");if(!l){l=a(this);a.data(this,"$this",l)}if(!i){i=a("#slidedeck-table-sort");a.data(this,"$form",i)}if(!j){j=a("#slidedeck-table").find(".float-wrapper .left");a.data(this,"$table",j)}a.ajax({url:ajaxurl,type:"get",data:i.serialize(),success:function(m){if(m!="false"){j.html(m);j.find(".tooltip").tooltipper({namespace:SlideDeckPlugin.namespace,offsetY:tooltipperOffset.Y,offsetX:tooltipperOffset.X})}}})});a('.wp-submenu a[href$="slidedeck2-lite.php/need-support"]').addClass("upgrade-modal").attr("rel","need-support");if(a(".upgrade-modal").length){var d="upsell";SlideDeckPlugin.UpgradeModal={addForClass:function(i){a("#slidedeck-"+d+"-simplemodal")[0].className=a("#slidedeck-"+d+"-simplemodal")[0].className.replace(/for\-[a-z]+\s?/,"");a("#slidedeck-"+d+"-simplemodal").addClass("for-"+i)},open:function(j){var i=this;if(!this.modal){this.modal=new SimpleModal({context:d})}this.modal.open(j)}};a("#wpwrap").delegate(".upgrade-modal","click",function(j){j.preventDefault();var i=a(this).attr("rel");a.get(ajaxurl+"?action=slidedeck_upsell_modal_content&feature="+i,function(k){SlideDeckPlugin.UpgradeModal.open(k);SlideDeckPlugin.UpgradeModal.addForClass(i);a("#slidedeck-upsell-simplemodal a.lens.placeholder").bind("click",function(l){l.preventDefault()})})})}if(!SlideDeckAnonymousStats.opted){SlideDeckPlugin.anonymousStatsOptinModal=new SimpleModal({context:"anonymous-stats",onComplete:function(i){i.elems.modal.on("submit","form",function(j){j.preventDefault();a.ajax({type:this.getAttribute("method"),url:this.getAttribute("action"),data:a(this).serialize()});SlideDeckPlugin.anonymousStatsOptinModal.close()}).on("click",'input[type="radio"]',function(j){a(this).closest("form").submit()})}});a.get(ajaxurl+"?action=slidedeck_anonymous_stats_optin",function(i){SlideDeckPlugin.anonymousStatsOptinModal.open(i)})}});a(window).resize(function(){updateTBSize()})})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!==""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};